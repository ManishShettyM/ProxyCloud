var objVar=false;function isMobile(){if(navigator.userAgent.match(/Android/i)||navigator.userAgent.match(/BlackBerry/i)||navigator.userAgent.match(/iPhone|iPod/i)||navigator.userAgent.match(/IEMobile/i))return true;return false}if(isMobile()){$(".comments-web").click(function(e){$("html, body").animate({scrollTop:$("#sidebar").offset().top},600)});$(".comments-web .close_comments").click(function(e){$("html, body").animate({scrollTop:0},600)});if(document.URL.indexOf("comment_item")>-1==true){$("html, body").animate({scrollTop:$("#sidebar").offset().top},600);$(".lhs_content").hide();$(".comments-web").show();$("#mobile-loginlink").addClass("hide-div");$(".comments-web .comments_reponsive").fadeIn("slow")}}$(document).off("click","#comments-landscape-icon").on("click","#comments-landscape-icon",function(e){e.preventDefault();objVar=true;$("#comments-landscape").show();$(".comments_reponsive").show();$("#comment_frame").show();$("html, body").animate({scrollTop:$(".copyright").offset().top},600);$("html, body").animate({scrollTop:$("#comments-landscape").offset().top},600)});if($(window).width()==768){if(document.URL.indexOf("comment_item")>-1==true){$("html, body").animate({scrollTop:$("#sidebar").offset().top},600);$(".lhs_content").hide();$("#comments-landscape").show();$(".comments_reponsive").show();$("#comment_frame").show()}}$("#comments-landscape .close_comments").click(function(e){$("html, body").animate({scrollTop:0},600);$("#comments-landscape").hide();window.location.href=document.URL.replace(/&?comment_item/i,"")});$(".comments-web .comments_reponsive").hide();$(".lhs_content").hide();if($(".comments-web .comments_reponsive").is(":visible")){$(".lhs_content").hide()}else{$(".lhs_content").show()}if(document.URL.indexOf("comment_item")>-1==true){$(".lhs_content").hide();$(".comments_reponsive").fadeIn("slow");$(".main-container").removeClass("large-14");$(".main-container").removeClass("large-push-6");$(".main-container").addClass("large-10");$(".main-container").addClass("large-push-10");$(".lhs-container").removeClass("large-6 ");$(".lhs-container").removeClass("large-pull-14");$(".lhs-container").addClass("large-10");$(".lhs-container").addClass("large-pull-10")}$(".comments-web").click(function(e){objVar=true;if($(".video-box iframe").is(":visible")){var iframe_video_width=$(".video-box iframe").attr("src").split("&")[1];var iframe_video_url=$(".video-box iframe").attr("src");if($(window).width()==1057){iframe_video_url=iframe_video_url.replace(iframe_video_width,"width=520");$(".video-box iframe").attr("src",iframe_video_url);$(".video-box iframe").attr("width","520");$(".video-box iframe").attr("height","320")}else if($(window).width()>799){iframe_video_url=iframe_video_url.replace(iframe_video_width,"width=540");$(".video-box iframe").attr("src",iframe_video_url);$(".video-box iframe").attr("width","540");$(".video-box iframe").attr("height","320")}}$(".lhs_content").hide();$(".comments_reponsive").fadeIn("slow");$(".main-container").removeClass("large-14");$(".main-container").removeClass("large-push-6");$(".main-container").addClass("large-10");$(".main-container").addClass("large-push-10");$(".lhs-container").removeClass("large-6 ");$(".lhs-container").removeClass("large-pull-14");$(".lhs-container").addClass("large-10");$(".lhs-container").addClass("large-pull-10")});$(".comments-web .close_comments").click(function(e){window.location.href=document.URL.replace(/&?comment_item/i,"");$(".lhs_content").fadeIn("slow");$(".comments_reponsive").hide();$(".main-container").addClass("large-14");$(".main-container").addClass("large-push-6");$(".main-container").removeClass("large-10");$(".main-container").removeClass("large-push-10");$(".lhs-container").addClass("large-6 ");$(".lhs-container").addClass("large-pull-14");$(".lhs-container").removeClass("large-10");$(".lhs-container").removeClass("large-pull-10")});$(".featured_links li").click(function(e){e.preventDefault();$(".featured_links li").find(".video_thumbnail").hide();$(this).find(".video_thumbnail").show();$(this).find("div").show();$(this).addClass("active").siblings().removeClass("active")});$(".featured_links li div").show();$(".featured_links li .video_thumbnail").hide();$(".featured_links li:first-child .video_thumbnail").show();$(".featured_links li:first-child ").addClass("active");$(".comments-web .user_comments .container_tab").hide();$(".comments-web .comment_tabs ul:first-child").show();$(".comments-web .user_comments #tabs1 li:first-child").addClass("active1");$(".comments-web .user_comments #tabs1 li").click(function(){$(".comments-web #tabs1 li").removeClass("active1");$(this).addClass("active1");$(".comments-web .user_comments .container_tab").hide();var selected_tab=$(this).find("a").attr("href");$(".comments-web"+" "+selected_tab).fadeIn("slow");return false});$("#comments-landscape .user_comments .container_tab").hide();$("#comments-landscape .comment_tabs ul:first-child").show();$("#comments-landscape .user_comments #tabs1 li:first-child").addClass("active1");$("#comments-landscape .user_comments #tabs1 li").click(function(){$("#comments-landscape #tabs1 li").removeClass("active1");$(this).addClass("active1");$("#comments-landscape .user_comments .container_tab").hide();var selected_tab=$(this).find("a").attr("href");$("#comments-landscape"+" "+selected_tab).fadeIn("slow");return false});$(".unicorn_video").on("click",function(){var g=$(this).find("#videoLink").attr("href");window.location=g});var mapid={live:"tab1",results:"tab2",fixtures:"tab3"};$.fn.switchTabs=function(){var tabContainer=$(this);var tabContainerID=$(this).attr("id")+"-content";var tabContentDivs=$("."+tabContainerID);tabContainer.find("ul li.series-mod-tab a").on("click",function(e){e.preventDefault();tabContainer.find("ul li a.active").removeClass("active");$(this).addClass("active");var tab_id=$(this).attr("id");tab_id="#content-"+tab_id;tabContainer.find(tabContentDivs).hide();$(tab_id).fadeIn(300)});var tab_id=tabContainer.find("ul li a.active").attr("id");tab_id="#content-"+tab_id;$(tab_id).fadeIn(300)};function createListTag(o,state){var tag="<li";var litext="";var matchurl="";$.each(o,function(k,v){var team1_desc=o["team1_desc"];var team2_desc=o["team2_desc"];var team1_name=o["team1_name"];var team2_name=o["team2_name"];var team1_short_name=o["team1_short_name"];var team2_short_name=o["team2_short_name"];var live_innings_number=o["live_innings_number"];matchurl=o["url"];var attr=" data-"+k.replace("_","-")+'="'+v+'"';tag+=attr;if(o.match_status==="forthcoming"){if(o["match_title"]){litext="<strong>"+o["match_title"]+": </strong>"}else{litext=""}litext+=team1_short_name+" v "+team2_short_name+" at "+o["venue"]+" on "+o["date"]+' <span style="font-size:9px;">'+o["m_start_time"]+"</span>"}else if(o.match_status==="complete"||state=="results"){litext='<a href="'+matchurl+'"><strong>'+team1_short_name+" v "+team2_short_name+" at "+o["venue"]+" - "+o["date"]+": </strong> "+o["status"]+"</a>"}else if(o.match_status==="current"||o.match_status==="dormant"){if(team1_desc.length==0){litext='<a href="'+matchurl+'"><strong>'+team1_short_name+" v "+team2_short_name+" at "+o["venue"]+" - "+o["date"]+": </strong>"+o["match_title"]+": "+o["status"]+"</a>"}else{litext='<a href="'+matchurl+'"><strong>'+team1_short_name+"</strong>"+o["team1_desc"]+" v <strong>"+team2_short_name+"</strong> <br />"+o["team2_desc"]+" "+o["status"]+"</a>"}}});tag+=' id="match-'+o["object_id"]+'">'+litext+"</li>";return tag}function updateListTag(o){var team1_desc=o["team1_desc"];var team2_desc=o["team2_desc"];var team1_name=o["team1_name"];var team2_name=o["team2_name"];var team1_short_name=o["team1_short_name"];var team2_short_name=o["team2_short_name"];var live_innings_number=o["live_innings_number"];var litext="";var obj=$("#match-"+o["object_id"]);var matchurl="";$.each(o,function(k,v){matchurl=o["url"];var dattr="data-"+k.replace("_","-");obj.attr(dattr,v);if(o.match_status==="forthcoming"){if(o["match_title"]){litext="<strong>"+o["match_title"]+": </strong>"}else{litext=""}litext+=team1_short_name+" v "+team2_short_name+" at "+o["venue"]+" on "+o["date"]+' <span style="font-size:9px;">'+o["m_start_time"]+"</span>"}else if(o.match_status==="current"||o.match_status==="dormant"){if(team1_desc.length==0){litext='<a href="'+matchurl+'"><strong>'+team1_short_name+" v "+team2_short_name+" at "+o["venue"]+" - "+o["date"]+": </strong>"+o["match_title"]+": "+o["status"]+"</a>"}else{litext='<a href="'+matchurl+'"><strong>'+team1_short_name+"</strong>"+o["team1_desc"]+" v <strong>"+team2_short_name+"</strong> <br />"+o["team2_desc"]+" "+o["status"]+"</a>"}}});obj.html(litext)}function updateMatchLists(m){var cid="#content-"+mapid["live"];var ciObj=$(cid).find("li");$.each(m,function(k,v){updateListTag(v)})}function createMatchLists(m,state){var cid="#content-"+mapid[state];var limit=2;var contentDivId=$("#series-mod-tab").find(cid).attr("id");var contentDivObj=$("#"+contentDivId);var listhtml="<ul>";var listmessage_live="<li>No Live Matches at the moment</li>";var listmessage_results="<li>No Results at the moment</li>";var listmessage="";var isCountyCricket=false;var t=$("#series-mod-tab").attr("data-series-id");t=parseInt(t,10);if(t===786877){isCountyCricket=true;limit=9}else{isCountyCricket=false}if(state=="live"){listmessage=listmessage_live}if(state=="results"){listmessage=listmessage_results}if(m.length==0){listhtml+=listmessage}else{$.each(m,function(k,v){var listtag=createListTag(v,state);listhtml+=listtag;if(limit==k){return false}})}var series_url=$("#series-mod-tab").attr("data-series-results-url");series_url=series_url.replace("/engine/","/content/");var bottom_links_live='<li><a href="'+series_url+'?template=fixtures">Complete Fixtures</a> | <a href="'+series_url+'?template=download_fixtures">Download Fixtures</a></li>';var bottom_links_county='<li><a href="http://www.espncricinfo.com/county-cricket-2015/content/match/fixtures.html?country=1;season=2015;class=4;class=5;class=6">Complete Fixtures</a>';var bottom_links_results_url=$("#series-mod-tab").attr("data-series-results-url");var bottom_links_results='<li><a href="'+bottom_links_results_url+'">Results page </a></li>';if(state=="live"&&m.length>0){if(isCountyCricket){listhtml+=bottom_links_county}else{listhtml+=bottom_links_live}}if(state=="results"&&m.length>0){listhtml+=bottom_links_results}listhtml+="</ul>";contentDivObj.html(listhtml)}function createMatchArrays(m){var live_arr=[];var results_arr=[];var fixtures_arr=[];$.each(m.scores,function(k,v){if(v.match_status==="complete"){results_arr.push(v)}if(v.match_status==="current"||v.match_status=="dormant"){live_arr.push(v)}if(v.match_status==="forthcoming"){live_arr.push(v)}});if(results_arr.length>0&&live_arr.length===0){$("#tab2, #content-tab2").show();$("#tab1, #content-tab1").hide();$("#tab1").removeClass("active");$("#tab2").addClass("active")}else if(results_arr.length>0&&live_arr.length>0){$("#tab1, #tab2").show();$("#content-tab2").hide()}else{$("#tab1, #content-tab1").show();$("#tab2, #content-tab2").hide()}createMatchLists(live_arr,"live");createMatchLists(results_arr,"results")}function updateMatchArrays(m){var live_arr=[];$.each(m.scores,function(k,v){if(v.match_status==="current"||v.match_status=="dormant"){live_arr.push(v)}if(v.match_status==="forthcoming"){live_arr.push(v)}});updateMatchLists(live_arr,"live")}function updateSeriesData(){var series_id=$("#series-mod-tab").attr("data-series-id");var jsonurl="/ci/engine/match/data/series_scores.json?seriesid="+series_id;$.getJSON(jsonurl,function(s){updateMatchArrays(s);setTimeout(updateSeriesData,45e3)})}function fetchSeriesData(){if($("#series-mod-tab").length>0){var series_id=$("#series-mod-tab").attr("data-series-id");if(typeof series_id!=="undefined"&&series_id.length>0){series_id=parseInt(series_id,10);var jsonurl="/ci/engine/match/data/series_scores.json?seriesid="+series_id;$.getJSON(jsonurl,function(s){createMatchArrays(s)});setTimeout(updateSeriesData,45e3)}}}$(document).ready(function($){$("#series-mod-tab").switchTabs();fetchSeriesData()});